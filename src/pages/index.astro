---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Hero from "../components/Hero.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import RecentPublications from "../components/RecentPublications.astro";
import BopSection from "../components/BopSection.astro";
---

<!doctype html>
<html lang="ja">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <link rel="sitemap" href="/sitemap-index.xml" />
    <link rel="preload" href="tcu-icon.webp" as="image">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-61T79P21HB" is:inline></script>
    <script type="text/partytown" is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-61T79P21HB');
    </script>
  </head>
  
  <body class="w-full mx-auto dark:bg-neutral-800 dark:text-neutral-300 transition-colors duration-300" >
    <!-- ヘッダー -->
    <section class="fixed top-0 left-0 w-full z-50 bg-white dark:bg-gray-800">
      <Header />
    </section>

    <Hero />

    <BopSection />

    <main class="main-content">
      <div class="px-4 md:px-16 flex flex-col gap-4 md:my-10">
        <div class="wrapper">
          <p class="paragraph w-full text-justify text-base md:text-lg">
            東京都市大学アニメーションスタジオ（都市大アニメーション）とは現役都市大生の有志（35名）で構成されるアニメーション制作集団です。
            アニメ化で命を吹き込むことによって、夢に翼を授けます。
            2024年10月現在、世田谷区や81プロデュースと作品制作を行なっています。
          </p>
        </div>
      </div>
      <RecentPublications />
    </main>

    <Footer />
  </body>
</html>

<style>
.video-section {
  position: relative;
  width: 100%;
  height: 100vh;
  overflow: hidden;
  z-index: 1;
  background-color: #000;
}

/* YouTubeプレーヤーのアスペクト比を修正 */
.video-section iframe {
  /* 黒帯を取り除くための設定 */
  transform-origin: center;
}

.video-container {
  position: relative;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 1rem;
  overflow: hidden;
}

/* 共通動画フレームスタイル */
.video-frame {
  border-radius: 2rem;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* デスクトップ用動画 */
.desktop-video {
  width: 100%;
  max-width: 560px;
  height: calc(100vw * 9/16);
  max-height: 315px;
  object-fit: cover;
}

/* モバイル用動画 */
.mobile-video {
  width: 100%;
  max-width: 315px;
  height: calc(100vw * 16/9);
  max-height: 560px;
  display: none;
}

@media (max-width: 768px) {
  .container {
    padding-top: 2rem;
  }
  
  .desktop-video {
    display: none;
  }
  
  .mobile-video {
    display: block;
    width: 80%;
    height: calc(80vw * 16/9);
  }
  
  .video-container {
    margin-bottom: 2rem;
  }
}

/* メインコンテンツのスタイル修正 */
.main-content {
  position: relative;
  background-color: white;
  z-index: 2; /* 動画よりも上のz-indexに設定 */
  border-radius: 3rem 3rem 0 0;
  padding-top: 4rem;
}

.dark .main-content {
  background-color: #262626;
}

/* bopセクションのz-indexを明示的に設定 */
#bop {
  position: relative;
  z-index: 2;
}

/* ダークモード切り替えのトランジション */
:root {
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* モバイル用の横長動画のスタイル */
@media (max-width: 640px) {
  .video-container {
    aspect-ratio: 16/9;
    max-width: 640px;
  }
}

/* デスクトップ用の縦長動画のスタイル */
@media (min-width: 641px) {
  .video-container {
    aspect-ratio: 9/16;
    max-width: 375px;
  }
}
</style>

<script type="application/ld+json" is:inline>
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "都市大アニメーション",
  "alternateName": ["東京都市大学アニメーションスタジオ", "TCU Animation Studio", "Tokyo City University Animation Studio", "都市大アニメ", "tcuA"],
  "site_name": "都市大アニメーション",
  "url": "https://tcu-acnimation.jp",
  "logo": "https://tcu-acnimation.jp/logo.webp",
  "sameAs": [
    "https://instagram.com/manapuraza",
    "https://manapuraza.com",
    "https://tcu-acnimation.manapuraza.com"
  ],
  "contactPoint": {
    "@type": "ContactPoint",
    "telephone": "07083372046",
    "contactType": "山下マナト（学生代表者）",
    "areaServed": "JP",
    "availableLanguage": ["Japanese", "English"]
  },
  "foundingDate": "2024-02-24",
  "founder": {
    "@type": "Person",
    "name": "山下マナト"
  },
  "description": "東京都市大学アニメーションスタジオ（都市大アニメーション）とは山下マナトとデジコンのメンバーを中心とした、都市大生の有志で構成されるアニメーション制作集団です。現在、世田谷区や81プロデュースと作品制作を行なっています。",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "〒158-8557 東京都世田谷区玉堤１丁目２８−１",
    "addressLocality": "東京",
    "addressRegion": "東京都",
    "postalCode": "158-8557",
    "addressCountry": "JP"
  }
}
</script>

<script>
  import { gsap } from 'gsap';

  // ページ読み込み完了後にアニメーションを開始
  window.addEventListener('load', () => {
    // メインコンテンツのアニメーション
    const tl = gsap.timeline({ defaults: { ease: 'power2.out' } });

    // headerのアニメーションを削除（Header.astroで定義済み）
    tl.from('#bop', {
      opacity: 0,
      y: 50,
      duration: 1,
      delay: 0.5
    })
    .from('.main-content', {
      opacity: 0,
      y: 30,
      duration: 1
    }, '-=0.5')
    .from('.paragraph', {
      opacity: 0,
      y: 20,
      duration: 0.8
    }, '-=0.3');

    // ヒーローセクション内の要素のアニメーション
    gsap.from('.video-container', {
      scale: 0.8,
      opacity: 0,
      duration: 1.2,
      delay: 1
    });
  });
</script>
