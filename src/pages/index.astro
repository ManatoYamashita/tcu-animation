---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Hero from "../components/Hero.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import RecentPublications from "../components/RecentPublications.astro";
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <link rel="sitemap" href="/sitemap-index.xml" />
    <link rel="preload" href="tcu-icon.webp" as="image">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-61T79P21HB" is:inline></script>
    <script type="text/partytown" is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-61T79P21HB');
    </script>
  </head>
  
  <body class="w-full mx-auto dark:bg-neutral-800 dark:text-neutral-300 transition-colors duration-300" >
    <!-- ヘッダー -->
    <section class="fixed top-0 left-0 w-full z-50 bg-white dark:bg-gray-800">
      <Header />
    </section>
    
    <!-- メインコンテンツ（ヘッダーの高さ分のパディングを追加） -->
    <!-- <div class="pt-6"></div> -->
      <Hero />
      <!-- 新作アニメ（新BOPへようこそ！）セクション -->
      <section id="bop" class="relative dark:bg-gray-800 bg-white min-h-screen h-full overflow-hidden z-20">
        <div class="bg-white dark:bg-gray-800 flex relative items-center overflow-hidden">
          <div class="container mx-auto px-6 flex flex-col-reverse sm:flex-row justify-evenly relative sm:py-16 gap-8">
            <div class="sm:w-1/2 flex flex-col relative z-20">
              <span class="w-20 h-2 bg-gray-800 dark:bg-white mb-12">
              </span>
              <h1 class="my-4 font-bebas-neue uppercase text-3xl sm:text-4xl font-black flex flex-col leading-none dark:text-white text-gray-800">
                <span class="text-lg sm:text-xl">
                  世田谷区共同 オリジナルアニメ完成！！
                </span>
                「新BOPへようこそ！」
              </h1>
              <p class="text-sm sm:text-base text-gray-700 dark:text-white">
                  企画・製作: 世田谷区  <br>
                  アニメーション制作: 都市大アニメーション <br>
                  制作協力: 81プロデュース <br>
                  総監督・学生代表: 山下マナト <br>
                  主演: 伊東健人、上田麗奈 <br>
              </p>
              <hr class="my-8">
              <p class="text-sm sm:text-base text-gray-700 dark:text-white">
                世田谷区主導の元、一年をかけてアニメ作品がついに完成！世田谷区公式YouTubeチャンネルにて2025年3月14日から配信中！
              </p>
              <div class="flex mt-8">
                <a href="https://youtu.be/zLuemAdQlMs?si=2kR9yVbVEfumg6gK" 
                  class="uppercase py-2 px-4 rounded-lg border-2 border-transparent text-white text-md mr-4" 
                  style="background-color: var(--color-primary); &:hover { opacity: 0.8; }">
                  本編
                  <small>(世田谷区公式YouTube)</small>
                </a>
                <a href="#" 
                  class="uppercase py-2 px-4 rounded-lg bg-transparent border-2 text-md hover:text-white transition-colors duration-300" 
                  style="border-color: var(--color-primary); color: var(--color-primary); &:hover { background-color: var(--color-primary); }">
                  予告編
                  <small>(世田谷区公式YouTube Shorts)</small>
                </a>
              </div>
            </div>
            <div class="sm:w-1/2 relative flex justify-center">
              <div class="video-container bg-white dark:bg-gray-800">
                <!-- デスクトップ用動画（縦長） -->
                <iframe 
                  class="hidden sm:block w-[375px] h-[667px] sm:scale-90"
                  src="https://www.youtube.com/embed/hdK1_B_Mef8?autoplay=1&mute=1&playsinline=1&loop=1" 
                  title="新BOPへようこそ！" 
                  frameborder="0" 
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                  referrerpolicy="strict-origin-when-cross-origin"
                  allowfullscreen>
                </iframe>
                <!-- モバイル用動画（横長） -->
                <iframe 
                  class="block sm:hidden w-full aspect-video"
                  src="https://www.youtube.com/embed/G69H1ePQNE8?autoplay=1&mute=1&playsinline=1&loop=1" 
                  title="【予告】新BOPへようこそ！" 
                  frameborder="0" 
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                  referrerpolicy="strict-origin-when-cross-origin"
                  allowfullscreen>
                </iframe>
              </div>
            </div>
          </div>
        </div>
      </section>

    <main class="main-content">
      <div class="px-4 md:px-16 flex flex-col gap-4 md:my-10">
        <div class="wrapper">
          <p class="paragraph w-full text-justify text-base md:text-lg">
            東京都市大学アニメーションスタジオ（都市大アニメーション）とは現役都市大生の有志（30名ほど）で構成されるアニメーション制作集団です。
            アニメ化で命を吹き込むことによって、夢に翼を授けます。
            2024年10月現在、世田谷区や81プロデュースと作品制作を行なっています。
          </p>
        </div>
      </div>
      <RecentPublications />
    </main>

    <Footer />
  </body>
</html>

<style>
.video-section {
  position: relative;
  width: 100%;
  height: 100vh;
  overflow: hidden;
  z-index: 1;
  background-color: #000;
}

/* YouTubeプレーヤーのアスペクト比を修正 */
.video-section iframe {
  /* 黒帯を取り除くための設定 */
  transform-origin: center;
}

.video-container {
  position: relative;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 1rem;
  overflow: hidden;
}

/* 共通動画フレームスタイル */
.video-frame {
  border-radius: 2rem;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* デスクトップ用動画 */
.desktop-video {
  width: 100%;
  max-width: 560px;
  height: calc(100vw * 9/16);
  max-height: 315px;
  object-fit: cover;
}

/* モバイル用動画 */
.mobile-video {
  width: 100%;
  max-width: 315px;
  height: calc(100vw * 16/9);
  max-height: 560px;
  display: none;
}

@media (max-width: 768px) {
  .container {
    padding-top: 2rem;
  }
  
  .desktop-video {
    display: none;
  }
  
  .mobile-video {
    display: block;
    width: 80%;
    height: calc(80vw * 16/9);
  }
  
  .video-container {
    margin-bottom: 2rem;
  }
}

/* メインコンテンツのスタイル修正 */
.main-content {
  position: relative;
  background-color: white;
  z-index: 2; /* 動画よりも上のz-indexに設定 */
  border-radius: 3rem 3rem 0 0;
  padding-top: 4rem;
}

.dark .main-content {
  background-color: #262626;
}

/* bopセクションのz-indexを明示的に設定 */
#bop {
  position: relative;
  z-index: 2;
}

/* ダークモード切り替えのトランジション */
:root {
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* モバイル用の横長動画のスタイル */
@media (max-width: 640px) {
  .video-container {
    aspect-ratio: 16/9;
    max-width: 640px;
  }
}

/* デスクトップ用の縦長動画のスタイル */
@media (min-width: 641px) {
  .video-container {
    aspect-ratio: 9/16;
    max-width: 375px;
  }
}
</style>

<script type="application/ld+json" is:inline>
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "都市大アニメーション",
  "alternateName": ["東京都市大学アニメーションスタジオ", "TCU Animation Studio", "Tokyo City University Animation Studio", "都市大アニメ"],
  "site_name": "都市大アニメーション",
  "url": "https://tcu-acnimation.manapuraza.com",
  "logo": "https://tcu-acnimation.manapuraza.com/logo.webp",
  "sameAs": [
    "https://instagram.com/manapuraza_com",
    "https://manapuraza.com"
  ],
  "contactPoint": {
    "@type": "ContactPoint",
    "telephone": "07083372046",
    "contactType": "山下マナト（学生代表者）",
    "areaServed": "JP",
    "availableLanguage": ["Japanese", "English"]
  },
  "foundingDate": "2024-02-24",
  "founder": {
    "@type": "Person",
    "name": "山下マナト"
  },
  "description": "東京都市大学アニメーションスタジオ（都市大アニメーション）とは山下マナトとデジコンのメンバーを中心とした、都市大生の有志で構成されるアニメーション制作集団です。現在、世田谷区や81プロデュースと作品制作を行なっています。",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "〒158-8557 東京都世田谷区玉堤１丁目２８−１",
    "addressLocality": "東京",
    "addressRegion": "東京都",
    "postalCode": "158-8557",
    "addressCountry": "JP"
  }
}
</script>

<script>
  import { gsap } from 'gsap';

  // ページ読み込み完了後にアニメーションを開始
  window.addEventListener('load', () => {
    // メインコンテンツのアニメーション
    const tl = gsap.timeline({ defaults: { ease: 'power2.out' } });

    tl.from('header', {
      y: -100,
      opacity: 0,
      duration: 1,
      delay: 0.5
    })
    .from('#bop', {
      opacity: 0,
      y: 50,
      duration: 1
    }, '-=0.5')
    .from('.main-content', {
      opacity: 0,
      y: 30,
      duration: 1
    }, '-=0.5')
    .from('.paragraph', {
      opacity: 0,
      y: 20,
      duration: 0.8
    }, '-=0.3');

    // ヒーローセクション内の要素のアニメーション
    gsap.from('.video-container', {
      scale: 0.8,
      opacity: 0,
      duration: 1.2,
      delay: 1
    });
  });
</script>
